{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = `44952732-afe4551e0894d66c0b6ee4476`;\n\nexport async function fetchImages(query, page = 1, per_page = 15) {\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${per_page}`;\n\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error(error.response.status);\n  }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function noImagesMessage() {\n  iziToast.show({\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n    class: 'toast-style',\n    messageColor: 'white',\n    titleColor: 'white',\n    iconColor: 'white',\n  });\n}\n\nexport function noApiResponse() {\n  iziToast.info({\n    title: 'Info',\n    message: 'No images found.',\n    class: 'toast-style',\n    messageColor: 'white',\n    titleColor: 'white',\n    iconColor: 'white',\n  });\n}\n\nexport function createImageCard({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n  <div class =\"image-container\">\n    <a href=\"${largeImageURL}\" class = \"image-link\">\n\n    <li class=\"image-item\">\n      <img src=\"${webformatURL}\" alt=\"${tags}\" />\n    </li>\n    <div class =\"\">\n      <li class=\"image-item-info\">\n        <p><span class = \"comment-head\">Likes</span> ${likes}</p>\n        <p><span class = \"comment-head\">Views</span> ${views}</p>\n        <p><span class = \"comment-head\">Comments</span> ${comments}</p>\n        <p><span class = \"comment-head\">Downloads</span> ${downloads}</p>\n      </li>\n    </div>\n    </a>\n  </div>\n  `;\n}\n\nexport function fetchAndRenderImages() {\n  elements.loading.style.display = 'block';\n}\n\nexport function showEndOfResultsNotification() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport {\n  noApiResponse,\n  noImagesMessage,\n  showEndOfResultsNotification,\n} from './js/render-functions.js';\nimport './css/header.css';\nimport { createImageCard } from './js/render-functions.js';\n\nconst elements = {\n  submitBtn: document.querySelector(`.js-submit-btn`),\n  form: document.querySelector(`form[data-form]`),\n  input: document.querySelector(`input[data-input]`),\n  gallery: document.querySelector(`.gallery`),\n  loading: document.querySelector(`.loadingText`),\n  loadMoreBtn: document.querySelector(`.js-loadmore-btn`),\n};\n\nconst lightbox = new SimpleLightbox('.image-link', {\n  captions: true,\n  captionSelector: `img`,\n  captionsData: `alt`,\n  captionType: `attr`,\n  captionPosition: `bottom`,\n  captionDelay: 250,\n});\n\nlet page = 1;\nconst perPage = 15;\nlet currentQuery = '';\nlet totalHits = 0;\nlet loadedImages = 0;\n\nfunction emptyInputInfo(trimmedInput) {\n  if (trimmedInput === '') {\n    elements.submitBtn.disabled = true;\n    noImagesMessage();\n    return true;\n  }\n  elements.submitBtn.disabled = false;\n  return false;\n}\n\nfunction processImages(res) {\n  const images = res.hits;\n  let imageMarkup = '';\n  images.forEach(image => {\n    imageMarkup += createImageCard(image);\n  });\n  elements.gallery.innerHTML = imageMarkup;\n  lightbox.refresh();\n  loadedImages += images.length;\n  if (loadedImages >= totalHits) {\n    elements.loadMoreBtn.style.display = 'none';\n    showEndOfResultsNotification();\n  } else {\n    elements.loadMoreBtn.style.display = 'flex';\n  }\n  scrollPage();\n}\n\nfunction showErrorNotification() {\n  iziToast.error({\n    title: 'Error',\n    message: 'No Images found or an error occurred while fetching images.',\n  });\n}\n\nasync function handleFormSubmit(event) {\n  event.preventDefault();\n  elements.loadMoreBtn.style.display = 'none';\n  const trimmedInput = elements.input.value.trim();\n  const userInputValue = elements.input.value;\n\n  if (currentQuery !== trimmedInput) {\n    page = 1;\n    currentQuery = trimmedInput;\n    loadedImages = 0;\n  }\n\n  elements.gallery.innerHTML = '';\n  elements.form.reset();\n\n  if (emptyInputInfo(trimmedInput)) {\n    elements.submitBtn.disabled = false;\n    return;\n  }\n\n  elements.loading.style.display = 'block';\n\n  try {\n    const res = await fetchImages(userInputValue, page, perPage);\n    totalHits = res.totalHits;\n\n    elements.loading.style.display = 'none';\n    if (res.hits.length === 0) {\n      noApiResponse();\n      return;\n    }\n    processImages(res);\n    elements.gallery.style.display = 'flex';\n    page += 1;\n  } catch (error) {\n    elements.loading.style.display = 'none';\n    showErrorNotification();\n  }\n}\n\nasync function handleLoadMore() {\n  elements.loading.style.display = 'block';\n  try {\n    const res = await fetchImages(currentQuery, page, perPage);\n\n    elements.loading.style.display = 'none';\n    if (res.hits.length === 0) {\n      noApiResponse();\n      return;\n    }\n\n    const images = res.hits;\n    let imageMarkup = '';\n    images.forEach(image => {\n      imageMarkup += createImageCard(image);\n    });\n    elements.gallery.insertAdjacentHTML('beforeend', imageMarkup);\n    lightbox.refresh();\n    loadedImages += images.length;\n    if (loadedImages >= totalHits) {\n      elements.loadMoreBtn.style.display = 'none';\n      showEndOfResultsNotification();\n    } else {\n      elements.loadMoreBtn.style.display = 'flex';\n    }\n    scrollPage();\n    page += 1;\n  } catch (error) {\n    elements.loading.style.display = 'none';\n    showErrorNotification();\n  }\n}\n\nfunction scrollPage() {\n  const galleryCards = document.querySelectorAll('.gallery .image-item');\n  if (galleryCards.length > 0) {\n    let totalHeight = 0;\n    galleryCards.forEach(card => {\n      totalHeight += card.getBoundingClientRect().height;\n    });\n    window.scrollBy({\n      top: totalHeight,\n      behavior: 'smooth',\n    });\n  }\n}\n\nelements.form.addEventListener(`submit`, handleFormSubmit);\nelements.loadMoreBtn.addEventListener('click', handleLoadMore);"],"names":["API_KEY","fetchImages","query","page","per_page","url","axios","error","noImagesMessage","iziToast","noApiResponse","createImageCard","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showEndOfResultsNotification","elements","lightbox","SimpleLightbox","perPage","currentQuery","totalHits","loadedImages","emptyInputInfo","trimmedInput","processImages","res","images","imageMarkup","image","scrollPage","showErrorNotification","handleFormSubmit","event","userInputValue","handleLoadMore","galleryCards","totalHeight","card"],"mappings":"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"}